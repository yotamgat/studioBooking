# בדיקת השינויים החדשים

## מה עודכן:

### 1. ✅ מבנה מחירון חדש
המערכת עכשיו תומכת במחירון המדויק שהעלית:
- תמחור לפי מספר משתתפים (1, 2-4, 5-15, 16-25, 26+)
- תמחור לפי סוג פעילות (חזרה, אימון/שיעון, סדנה/ש.פרטי)
- תמחור לפי מסחרי/לא מסחרי

### 2. ✅ הוסרה תצוגת החיסוך
בדף בחירת החלל אין יותר תצוגה של מחירונים והנחות

### 3. ✅ בחירת זמן גמישה
- בחירת שעת התחלה (בקפיצות של 15 דקות)
- בחירת משך זמן (15 דקות עד 6 שעות)
- בדיקת זמינות בזמן אמת
- חישוב מחיר אוטומטי

### 4. ✅ פרטי הזמנה מורחבים
- מספר משתתפים
- סוג פעילות
- מסחרי/לא מסחרי

---

## איך לבדוק:

### שלב 1: עדכן את מסד הנתונים

```bash
# הרץ את תסריט הנתונים המעודכן
node scripts/seed.js
```

**מה אמור לקרות:**
- מסד הנתונים יתרוקן
- ייווצרו 2 חללים חדשים עם המחירון המלא (לפי התמונה)
- כל חלל יכיל 27 שורות מחירון

### שלב 2: הפעל את השרת

```bash
npm run dev
```

### שלב 3: בדוק את התהליך

1. **גש ל-http://localhost:3000/booking**

2. **בחר חלל**
   - אמור לראות 2 כרטיסים עם תמונות
   - ללא תצוגת מחירים או חיסוך
   - רק הודעה: "המחיר הסופי יחושב לפי מספר המשתתפים..."

3. **בחר תאריך**
   - לוח שנה רגיל
   - בחר תאריך עתידי

4. **מלא פרטי הזמנה:**
   
   **שעת התחלה:**
   - בחר שעה (09-22)
   - בחר דקות (00, 15, 30, 45)
   
   **משך זמן:**
   - בחר מהרשימה (15 דקות - 6 שעות)
   - אמור לראות "שעת סיום משוערת"
   
   **מספר משתתפים:**
   - הכנס מספר (לדוגמה: 10)
   
   **סוג פעילות:**
   - בחר אחד מ-3 האפשרויות
   
   **מסחרי:**
   - סמן/בטל סימון

5. **המערכת תבדוק אוטומטית:**
   - ✅ האם הזמן פנוי
   - 💰 כמה עולה לפי הפרמטרים

---

## דוגמאות לבדיקה:

### דוגמה 1: אימון פרטני
- משתתפים: 1
- סוג: אימון/שיעון
- מסחרי: לא
- משך: 1 שעה
- **מחיר צפוי: ₪45**

### דוגמה 2: שיעור קבוצתי קטן
- משתתפים: 8
- סוג: אימון/שיעון
- מסחרי: לא
- משך: 1.5 שעות (90 דקות)
- **מחיר צפוי: ₪105** (70 × 1.5)

### דוגמה 3: אירוע מסחרי
- משתתפים: 20
- סוג: סדנה/ש.פרטי
- מסחרי: כן
- משך: 2 שעות
- **מחיר צפוי: ₪520** (260 × 2)

### דוגמה 4: חזרה לא מסחרית
- משתתפים: 30
- סוג: חזרה
- מסחרי: לא
- משך: 3 שעות
- **מחיר צפוי: ₪330** (110 × 3)

---

## בדיקת זמינות:

1. **צור הזמנה ראשונה:**
   - תאריך: מחר
   - שעה: 10:00
   - משך: 2 שעות
   - שמור בזיכרון

2. **נסה ליצור הזמנה חופפת:**
   - אותו תאריך
   - שעה: 11:00 (חופף!)
   - משך: 1 שעה
   - **צריך להראות: ❌ לא פנוי בזמן הנבחר**

3. **נסה הזמנה שלא חופפת:**
   - אותו תאריך
   - שעה: 12:30 (אחרי ההזמנה הראשונה)
   - משך: 1 שעה
   - **צריך להראות: ✓ פנוי!**

---

## שגיאות אפשריות:

### שגיאה: "לא נמצא מחיר מתאים"
**סיבה:** המחירון לא טעון נכון
**פתרון:** 
```bash
node scripts/seed.js
```

### שגיאה ב-API
**בדוק בקונסול (F12):**
- יש שגיאות אדומות?
- מה כתוב?

### מחיר 0 או לא מוצג
**בדוק:**
- MongoDB Compass → studios → pricing (צריך להיות 27 שורות)
- הקונסול ב-Network Tab → בקשה ל-`/api/calculate-price`

---

## מה עדיין לא מוכן:

⏳ **יומן יפה** - זה השלב הבא
⏳ **שמירת הזמנות** - כרגע רק מראה "הזמנה נשמרה"
⏳ **תשלומים** - עדיין לא מחובר

---

## אם הכל עובד:

תראה:
1. ✅ בחירת חלל ללא מחירים
2. ✅ בחירת תאריך
3. ✅ טופס פרטי הזמנה מלא
4. ✅ בדיקת זמינות אוטומטית
5. ✅ חישוב מחיר נכון
6. ✅ כפתור "אישור והמשך לתשלום"

---

**בהצלחה! תגיד לי מה עובד ומה לא** 🚀
