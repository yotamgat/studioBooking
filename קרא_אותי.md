# מערכת הזמנות לסטודיו ריקוד

מערכת מקוונת לניהול והזמנת חללי ריקוד, כולל תשלומים ופאנל ניהול.

## תכונות עיקריות

### ללקוחות
- רישום והתחברות למערכת
- צפייה בחללים זמינים עם תמונות ופרטים
- בחירת תאריך ושעות
- בדיקת זמינות בזמן אמת
- מחירונים גמישים עם הנחות
- תשלום מקוון מאובטח
- צפייה בהיסטוריית הזמנות

### למנהלים
- פאנל ניהול מרכזי
- צפייה בכל ההזמנות
- ניהול זמינות וחסימת שעות
- הגדרת מחירים ומחירונים
- דוחות והכנסות

## טכנולוגיות

- **צד לקוח:** React, Next.js 14, Tailwind CSS
- **צד שרת:** Next.js API Routes, Node.js
- **מסד נתונים:** MongoDB עם Mongoose
- **אימות:** NextAuth.js
- **תשלומים:** Stripe

## התקנה

### דרישות מקדימות
- Node.js גרסה 18 ומעלה
- MongoDB (מקומי או Atlas)

### שלבי התקנה

1. **התקנת תלויות**
```bash
npm install
```

2. **הגדרת משתני סביבה**

צור קובץ בשם `.env.local` והוסף:

```
# מסד נתונים
MONGODB_URI=mongodb://localhost:27017/studio-booking

# אימות
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=מחרוזת-סודית-חזקה

# תשלומים (אופציונלי בשלב הפיתוח)
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
```

3. **הכנסת נתוני דוגמה**
```bash
node scripts/seed.js
```

זה יוסיף:
- 2 חללי ריקוד עם תמונות
- מחירונים מוגדרים
- פרטים מלאים בעברית

4. **הרצת השרת**
```bash
npm run dev
```

5. **פתיחת הדפדפן**

גש לכתובת: http://localhost:3000

## מבנה הפרויקט

```
studio-booking/
├── app/                      # דפים וממשק תכנות
│   ├── api/                 # נקודות קצה
│   │   ├── bookings/       # הזמנות
│   │   └── studios/        # חללים
│   ├── booking/            # דף הזמנה
│   └── page.tsx            # דף הבית
├── components/             # רכיבים מעוצבים
│   ├── booking/           # רכיבי הזמנה
│   └── ui/                # רכיבים כלליים
├── models/                # מודלים של מסד הנתונים
│   ├── User.ts           # משתמשים
│   ├── Studio.ts         # חללים
│   ├── Booking.ts        # הזמנות
│   └── Availability.ts   # זמינות
├── lib/                  # פונקציות עזר
└── scripts/              # תסריטים
    └── seed.js          # הכנסת נתוני דוגמה
```

## מודלי נתונים

### חלל (Studio)
- שם וסיקור
- מידע מפורט
- תמונות (לפחות אחת)
- קיבולת וגודל
- מתקנים ותכונות
- מחירונים מרובים
- מחיר בסיסי

### הזמנה (Booking)
- חלל ומשתמש
- תאריך ושעות
- מחיר סופי
- סטטוס ההזמנה
- סטטוס התשלום

### זמינות (Availability)
- חלל
- יום בשבוע (לחזרתיות)
- תאריך ספציפי (לחד-פעמי)
- שעות
- סיבה (שיעור ריקוד, תחזוקה וכו')

## מחירונים

המערכת תומכת במחירונים גמישים:

**דוגמה לחלל 1:**
- שעה בודדת: 150 ש"ח
- 2-4 שעות: 135 ש"ח לשעה (חיסוך 10%)
- 5+ שעות: 120 ש"ח לשעה (חיסוך 20%)

המערכת בוחרת אוטומטית את המחירון המתאים לפי מספר השעות שנבחרו.

## תמונות

כרגע המערכת משתמשת בתמונות מ-Unsplash לדוגמה.

לשימוש בפרודקציה, מומלץ להשתמש באחת מהאפשרויות:
1. Cloudinary (מומלץ)
2. Vercel Blob Storage
3. AWS S3

ראה את הקובץ `IMAGE_UPLOAD_GUIDE.md` להוראות מפורטות.

## פריסה לייצור

### Vercel (מומלץ)

1. העלה את הקוד ל-GitHub
2. התחבר ל-Vercel
3. חבר את המאגר
4. הוסף משתני סביבה
5. פרוס!

```bash
# או דרך שורת הפקודה
npm install -g vercel
vercel
```

### משתני סביבה ב-Vercel

הוסף את כל המשתנים מקובץ `.env.local` בלוח הבקרה של Vercel:
Project Settings → Environment Variables

## משימות עתידיות

### בעדיפות גבוהה
- [ ] מערכת אימות (התחברות והרשמה)
- [ ] אינטגרציה עם Stripe לתשלומים
- [ ] פאנל ניהול למנהלת הסטודיו
- [ ] התראות במייל ובהודעות טקסט

### בעדיפות בינונית
- [ ] העלאת תמונות דרך פאנל הניהול
- [ ] ניהול מחירונים דרך פאנל
- [ ] דוחות וניתוחים
- [ ] גיבויים אוטומטיים

### בעדיפות נמוכה
- [ ] אפליקציה לנייד
- [ ] תמיכה בשפות נוספות
- [ ] אינטגרציה עם לוח שנה חיצוני

## פתרון בעיות

### החללים לא מוצגים

1. בדוק שמסד הנתונים מכיל נתונים:
   - פתח MongoDB Compass
   - בדוק את האוסף 'studios'
   - אמורים להיות 2 מסמכים

2. אם האוסף ריק, הרץ:
   ```bash
   node scripts/seed.js
   ```

3. בדוק את ממשק התכנות:
   - פתח: http://localhost:3000/api/studios
   - אמור להחזיר 2 חללים

### שגיאת חיבור למסד נתונים

ודא שהקובץ `.env.local` קיים ומכיל את המשתנה MONGODB_URI הנכון.

אם אתה משתמש במונגו מקומי, ודא שהשירות פועל:
```bash
# מק
brew services start mongodb-community

# או בדוק סטטוס
brew services list | grep mongodb
```

## רישיון

MIT

## תמיכה

לשאלות או בעיות, פתח דיווח בעמוד הבעיות של המאגר.

---

**נבנה באהבה עם Next.js ומונגו** ❤️
